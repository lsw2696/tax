# 조특법 세액공제 자동 판정 시스템

## 프로젝트 개요

**조세특례제한법 기반 세액공제 자동 판정 시스템**은 사업자의 재무·고용·투자·연구개발 데이터를 입력받아 20개의 세액공제 항목을 자동으로 판정하는 전문 컨설팅 도구입니다.

### 주요 특징

- ⚡ **실시간 자동 판정**: 입력 즉시 20개 세액공제 항목 자동 분석
- 🎯 **정확한 계산**: 최신 조세특례제한법 기반 공제액 산출
- 📊 **상세한 분석**: 판정 사유와 계산 근거 제공
- 💾 **데이터 저장**: Cloudflare D1 SQLite 데이터베이스에 이력 관리

## 🌐 공개 URL

**개발 서버**: https://3000-i7t89h4cg3o2uhrr8y49u-de59bda9.sandbox.novita.ai

## 📋 세액공제 항목 (20개)

### 1️⃣ 고용 관련 공제 (5개)

| ID | 항목명 | 법조항 | 주요 내용 |
|----|--------|--------|-----------|
| 1 | 고용증대 세액공제 | 제29조의7 | 상시근로자 증가 1인당 450만~1,200만원 |
| 2 | 청년 정규직 추가 공제 | 제29조의7 | 15-34세 청년 채용 시 추가 500만~1,200만원 |
| 3 | 장애인 고용 세액공제 | 제29조의8 | 장애인 근로자 1인당 연 960만원 |
| 4 | 경력단절여성 재고용 | 제29조의9 | 재고용 1인당 연 1,100만원 (최대 2년) |
| 5 | 사회보험료 세액공제 | 제30조의4 | 사업주 부담분의 25% (인당 연 100만원 한도) |

### 2️⃣ 중소기업·창업 관련 (5개)

| ID | 항목명 | 법조항 | 주요 내용 |
|----|--------|--------|-----------|
| 6 | 중소기업 특별세액감면 | 제7조 | 업종별 5~10% 감면 |
| 7 | 창업중소기업 세액감면 | 제6조 | 창업 후 5년간 50~100% 감면 |
| 8 | 제조업 지방이전 감면 | 제63조 | 수도권→지방 이전 시 7년간 100% 감면 |
| 9 | 사회적기업·협동조합 감면 | 제85조의6 | 50~100% 감면 (최대 5년) |
| 10 | 청년창업 세액감면 | 제6조제3항 | 34세 이하 창업 시 100% 감면 (연 2억 한도) |

### 3️⃣ 투자·시설 공제 (4개)

| ID | 항목명 | 법조항 | 주요 내용 |
|----|--------|--------|-----------|
| 11 | 생산성향상시설 투자 | 제24조 | 투자금액의 3~10% 공제 |
| 12 | 에너지·환경시설 투자 | 제25조 | 투자금액의 3~10% 공제 |
| 13 | 안전시설 투자 | 제25조의6 | 투자금액의 3~10% 공제 |
| 14 | 스마트공장 설비 투자 | 제24조제1항제4호 | 투자금액의 5~15% 공제 |

### 4️⃣ 연구개발 관련 (3개)

| ID | 항목명 | 법조항 | 주요 내용 |
|----|--------|--------|-----------|
| 15 | 연구인력개발비 공제 | 제10조 | 비용의 5~30% 공제 |
| 16 | 디자인 개발비 공제 | 제10조의2 | 비용의 5~25% 공제 |
| 17 | 데이터·AI·IoT 개발비 | 제10조제1항제3호 | 비용의 10~30% 공제 (추가 우대) |

### 5️⃣ 기타 (2개)

| ID | 항목명 | 법조항 | 주요 내용 |
|----|--------|--------|-----------|
| 18 | 기부금 세액공제 | 소득세법 제59조의4 | 한도 내 15% 공제율 |
| 19 | 업무용 차량 비용 한도 | 법인세법 시행령 제48조 | 감가상각비 800만원, 임차료 1,200만원 한도 |

## 🏗️ 기술 스택

- **Frontend**: HTML5 + TailwindCSS + Vanilla JavaScript
- **Backend**: Hono (Cloudflare Workers)
- **Database**: Cloudflare D1 (SQLite)
- **Deployment**: Cloudflare Pages
- **Process Manager**: PM2 (개발 환경)

## 📂 프로젝트 구조

```
webapp/
├── src/
│   ├── index.tsx              # 메인 백엔드 (규칙 엔진 + API)
│   └── renderer.tsx           # JSX 렌더러
├── public/
│   └── static/
│       └── app.js             # 프론트엔드 JavaScript
├── migrations/
│   └── 0001_initial_schema.sql # D1 데이터베이스 스키마
├── tax_rules.json             # 세액공제 규칙 정의 (19개)
├── wrangler.jsonc             # Cloudflare 설정
├── package.json               # 의존성 및 스크립트
├── ecosystem.config.cjs       # PM2 설정
└── README.md                  # 프로젝트 문서
```

## 🗄️ 데이터베이스 구조

### 주요 테이블

1. **companies**: 사업자 기본 정보
2. **employment_data**: 고용 관련 데이터
3. **investment_data**: 투자 시설 정보
4. **rnd_data**: 연구개발비 정보
5. **other_data**: 창업/기부금 등 기타 정보
6. **assessment_results**: 판정 결과 상세
7. **assessment_sessions**: 판정 세션 이력

## 🚀 API 엔드포인트

### 규칙 조회
```bash
GET /api/rules                    # 전체 규칙 조회
GET /api/rules/:ruleKey           # 특정 규칙 상세
```

### 사업자 관리
```bash
POST /api/companies               # 사업자 등록
GET /api/companies/:businessNumber # 사업자 조회
```

### 판정 실행
```bash
POST /api/assess                  # 세액공제 판정 실행
{
  "company_id": 1,
  "year": 2024,
  "employmentData": { ... },
  "investmentData": [ ... ],
  "rndData": [ ... ],
  "otherData": { ... }
}
```

### 결과 조회
```bash
GET /api/results/:companyId/:year # 판정 결과 조회
```

## 💻 로컬 개발

### 1. 빌드
```bash
npm run build
```

### 2. 데이터베이스 마이그레이션
```bash
npm run db:migrate:local
```

### 3. 개발 서버 시작
```bash
# PM2 사용 (권장)
pm2 start ecosystem.config.cjs

# 또는 직접 실행
npm run dev:sandbox
```

### 4. 테스트
```bash
curl http://localhost:3000
curl http://localhost:3000/api/rules
```

## 📊 규칙 엔진 로직

각 세액공제 항목은 다음 절차로 판정됩니다:

1. **요건 검증**: 법령상 적용 요건 충족 여부 확인
2. **금액 계산**: 기업 규모, 업종, 지역 등에 따른 공제액 산출
3. **한도 적용**: 법령상 한도액 적용
4. **결과 생성**: 판정 사유 및 상세 계산 내역 제공

### 판정 예시

**고용증대 세액공제 (중소기업, 수도권)**
- 증가 인원: 3명
- 1인당 공제액: 1,100만원
- **총 공제액: 3,300만원**

## 📝 개발 이력

- **2025-11-16**: 프로젝트 초기 생성
  - Hono 프레임워크 기반 백엔드 구축
  - 조세특례제한법 PDF 분석 및 규칙 데이터 추출 (19개 항목)
  - D1 데이터베이스 설계 및 마이그레이션
  - 규칙 엔진 로직 구현 (20개 세액공제 판정 함수)
  - REST API 엔드포인트 구현
  - 메인 페이지 UI 구현

## ⚠️ 주의사항

본 시스템은 **참고용 컨설팅 도구**입니다.

- 실제 세액 신고 시 세무 전문가와 상담하시기 바랍니다
- 법령 개정에 따라 규칙이 변경될 수 있습니다
- 복잡한 사례는 개별 검토가 필요합니다

## 🔜 향후 개발 계획

- [ ] 입력 폼 UI (단계별 Wizard 방식)
- [ ] 결과 리포트 페이지 (PDF 다운로드)
- [ ] 대시보드 (판정 이력 조회)
- [ ] 사용자 인증 시스템
- [ ] Cloudflare Pages 프로덕션 배포
- [ ] 법령 자동 업데이트 기능

## 📄 라이선스

본 프로젝트는 참고용으로 제공되며, 실제 세무 신고 시 전문가와 상담하시기 바랍니다.

---

**개발자**: 우서기 (컨설턴트, 경영지도사, 개업공인중개사)  
**프로젝트 코드명**: webapp  
**최종 업데이트**: 2025-11-16
